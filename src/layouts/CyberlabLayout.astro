---
import NavBar from '../components/cyber/NavBarCyber.astro';
const { lab = {} } = Astro.props;
// define fallback object as lab isnt always available at render
//console.log("Lab in layout:", lab);
---

<html lang="en" class="bg-black" style="background-color: #000000">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <title>{lab?.title}</title>
  </head>

    <body>
    <NavBar />
    <main class="grid gap-8 p-8">
      <div class="infront max-w-4xl mx-auto p-6 space-y-8">

        <!-- Header -->
        <header class="space-y-2">
          <h1 class="text-3xl font-bold text-cyan-500/80">{lab.title}</h1>
          <p class="text-gray-400/60 font-mono text-sm">{lab.date} â€¢ {lab.category}</p>
        </header>

        <!-- Overview / Objective -->
        <section class="border border-cyan-900 bg-gray-800/60 p-4 rounded-lg">
          <h2 class="text-xl font-semibold mb-2 text-white">Objective</h2>
          <p class="text-gray-300">{lab.objective}</p>
        </section>

        <!-- Steps / Walkthrough -->
        <section class="space-y-6">
          <h2 class="text-xl font-semibold mb-4 text-center">Steps</h2>
          {lab.steps.map((step, idx) => (
            <div class="bg-gray-900/50 p-4 rounded-lg">
              <h3 class="text-right font-bold text-m text-cyan-400/40 mb-1">Step {idx + 1}</h3>
              <p class="text-gray-400 mb-2">{step.description}</p>

              {step.code ? (
                <pre class="bg-gray-900 p-3 rounded text-green-400 overflow-x-auto">
                  <code>{step.code}</code>
                </pre>
              ) : null}

              {step.image ? (
                <img src={step.image} alt={`Step ${idx + 1}`} class="rounded mt-2 mx-auto justify-center" />
              ) : null}
            </div>
          ))}
        </section>

        <!-- Notes / Lessons Learned -->
        <section class="bg-gray-800/30 p-4 rounded-lg border border-purple-800">
          <h2 class="text-xl font-semibold mb-2 text-white">Notes / Lessons Learned</h2>
          <ul class="list-disc list-inside text-gray-300">
            {lab.notes.map((note) => (
              <li>{note}</li>
            ))}
          </ul>
        </section>

        <!-- sources -->
      <section class="space-y-6 bg-gray-900/50 p-4 rounded-lg">
        <h3 class="font-bold text-sm text-cyan-400/40 mb-1">Sources</h3>
        <ul class="list-disc list-inside text-gray-300 text-sm">
          {lab.sources.map((source, idy) => (
            <li key={idy}>
              <a href={source.link} target="_blank" rel="noopener noreferrer">
                {source.sourcetitle}
              </a>
            </li>
          ))}
        </ul>
      </section>


        <!-- Navigation -->
        <footer class="flex justify-between text-cyan-400 font-semibold">
          <a href="/cybersec">&larr; Back to Dashboard</a>
          <a href={lab.nextLabUrl}>Next Lab &rarr;</a>
        </footer>
      </div>
    </main>

    <slot />
  </body>

</html>


